<!DOCTYPE HTML>
<!--
	Spectral by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
       <head>
                <title>ICQA – Inspiring Care, Quality Assured</title>
                <meta charset="utf-8" />
                <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
                <meta name="description" content="ICQA supports inclusive counseling, education, and management services that uplift every learner." />
                <meta property="og:locale" content="ko_KR" />
                <meta property="og:type" content="website" />
                <meta property="og:title" content="ICQA – Inspiring Care, Quality Assured" />
                <meta property="og:description" content="ICQA supports inclusive counseling, education, and management services that uplift every learner." />
                <meta property="og:url" content="https://icqa.us/" />
                <meta property="og:image" content="https://icqa.us/images/banner.jpg" />
                <meta property="og:site_name" content="ICQA" />
                <meta name="twitter:card" content="summary_large_image" />
                <meta name="twitter:title" content="ICQA – Inspiring Care, Quality Assured" />
                <meta name="twitter:description" content="ICQA supports inclusive counseling, education, and management services that uplift every learner." />
                <meta name="twitter:image" content="https://icqa.us/images/banner.jpg" />
                <!-- TODO: Update favicon assets with final artwork -->
                <link rel="icon" href="favicon.ico" />
                <link rel="apple-touch-icon" href="apple-touch-icon.png" />
               <link rel="stylesheet" href="assets/css/main.css" />
               <link rel="stylesheet" href="assets/css/custom.css" />
                <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
                <!-- Markdown 파서 + XSS 방지 -->
                <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
                <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js"></script>
	</head>
	<body class="landing is-preload">

		<!-- Page Wrapper -->
			<div id="page-wrapper">

                               <!-- Header -->
                                       <header id="header" class="alt">
                                               <h1><a href="index.html">ICQA</a></h1>
                                               <nav id="nav">
                                                      <ul>
                                                              <li><a class="scrolly" href="#about" aria-label="Scroll to the About section">About</a></li>
                                                              <li><a class="scrolly" href="#education" aria-label="Scroll to the Education section">Education</a></li>
                                                              <li><a class="scrolly" href="#counseling" aria-label="Scroll to the Counseling section">Counseling</a></li>
                                                              <li><a class="scrolly" href="#management" aria-label="Scroll to the Management section">Management</a></li>
                                                              <li><a class="scrolly" href="#specialization" aria-label="Scroll to the Specialization section">Specialization</a></li>
                                                              <li><a class="scrolly" href="#research" aria-label="Scroll to the Research section">Research</a></li>
                                                              <li><a class="scrolly" href="#welfare" aria-label="Scroll to the Welfare section">Welfare</a></li>
                                                              <li><a class="scrolly" href="#administration" aria-label="Scroll to the Administration section">Administration</a></li>
                                                              <li><a class="scrolly" href="#foreign-language" aria-label="Scroll to the Foreign Language section">Foreign Language</a></li>
                                                              <li><a class="scrolly" href="#contact" aria-label="Scroll to the Contact section">Contact</a></li>
                                                      </ul>
                                               </nav>
                                       </header>

				<!-- Banner -->
                                        <section id="banner">
                                                <div class="inner">
                                                        <span class="logo">
                                                                <img src="./images/hero_logo.svg" alt="ICQA 로고" width="200" height="200" loading="lazy" />
                                                                <!-- TODO: Replace hero_logo.svg with finalized ICQA logo asset -->
                                                        </span>
                                                        <h2>ICQA – Inspiring Care, Quality Assured</h2>
                                                        <p>Inclusive counseling, education, and management services that uplift every learner.</p>
                                                        <ul class="actions special">
                                                                <li><a href="#about" class="button primary">Get Started</a></li>
                                                        </ul>
						</div>
                                               <a href="#about" class="more scrolly">Learn More</a>
                                        </section>

                               <section id="verify" class="wrapper style1">
                                       <div class="inner">
                                               <h2>QUALIFICATION SEARCH</h2>

                                               <form id="verify-form" class="verify-inline" autocomplete="off" novalidate>
                                                       <div class="form-row">
                                                               <div class="field">
                                                                       <label class="visually-hidden" for="field-iqn">International qualification number</label>
                                                                       <input type="text" id="field-iqn" name="iqn" placeholder="International qualification number" inputmode="latin" />
                                                                       <p class="error-text" id="err-iqn" hidden></p>
                                                               </div>

                                                               <div class="field">
                                                                       <label class="visually-hidden" for="field-name">Name</label>
                                                                       <input type="text" id="field-name" name="name" placeholder="Name" />
                                                                       <p class="error-text" id="err-name" hidden></p>
                                                               </div>

                                                               <ul class="actions">
                                                                       <li><button type="submit" class="button primary">SEARCH</button></li>
                                                               </ul>
                                                       </div>
                                               </form>
                                       </div>
                               </section>
                               <section id="about" class="wrapper style1">
                                        <div class="inner">
                                                <h2>About</h2>
                                                <div id="md-about" data-md="content/about.md">Loading…</div>
                                        </div>
                                </section>
                                <section id="education" class="wrapper style2">
                                        <div class="inner">
                                                <h2>Education</h2>
                                                <div id="md-education" data-md="content/education.md">Loading…</div>
                                        </div>
                                </section>
                                <section id="counseling" class="wrapper style3">
                                        <div class="inner">
                                                <h2>Counseling</h2>
                                                <div id="md-counseling" data-md="content/counseling.md">Loading…</div>
                                        </div>
                                </section>
                               <section id="management" class="wrapper style3">
                                       <div class="inner">
                                               <h2>Management</h2>
                                               <div id="md-management" data-md="content/management.md">Loading…</div>
                                       </div>
                               </section>
                               <!-- Specialization -->
                               <section id="specialization" class="wrapper style1">
                                       <div class="inner">
                                               <h2>Specialization</h2>
                                               <div id="md-specialization" data-md="content/specialization.md">Loading…</div>
                                       </div>
                               </section>

                               <!-- Research -->
                               <section id="research" class="wrapper style2">
                                       <div class="inner">
                                               <h2>Research</h2>
                                               <div id="md-research" data-md="content/research.md">Loading…</div>
                                       </div>
                               </section>

                               <!-- Welfare -->
                               <section id="welfare" class="wrapper style3">
                                       <div class="inner">
                                               <h2>Welfare</h2>
                                               <div id="md-welfare" data-md="content/welfare.md">Loading…</div>
                                       </div>
                               </section>

                               <!-- Administration -->
                               <section id="administration" class="wrapper style1">
                                       <div class="inner">
                                               <h2>Administration</h2>
                                               <div id="md-administration" data-md="content/administration.md">Loading…</div>
                                       </div>
                               </section>

                               <!-- Foreign Language -->
                               <section id="foreign-language" class="wrapper style2">
                                       <div class="inner">
                                               <h2>Foreign Language</h2>
                                               <div id="md-foreign-language" data-md="content/foreign-language.md">Loading…</div>
                                       </div>
                               </section>
                                <section id="contact" class="wrapper style2">
                                        <div class="inner">
                                                <h2>Contact</h2>
                                                <div id="md-contact" data-md="content/contact.md">Loading…</div>
                                                <form id="contact-form" class="contact-form" action="https://formspree.io/f/TODO" method="POST"><!-- TODO: replace with real Formspree ID -->
                                                        <div class="fields">
                                                                <div class="field">
                                                                        <label for="contact-name">Name</label>
                                                                        <input type="text" id="contact-name" name="name" aria-label="Name" required />
                                                                </div>
                                                                <div class="field">
                                                                        <label for="contact-email">Email</label>
                                                                        <input type="email" id="contact-email" name="email" aria-label="Email" required />
                                                                </div>
                                                                <div class="field">
                                                                        <label for="contact-message">Message</label>
                                                                        <textarea id="contact-message" name="message" aria-label="Message" rows="5" required></textarea>
                                                                </div>
                                                        </div>
                                                        <input type="text" name="_gotcha" class="honeypot" aria-hidden="true" tabindex="-1" autocomplete="off" />
                                                        <ul class="actions">
                                                                <li><button type="submit" class="button submit">Send Message</button></li>
                                                        </ul>
                                                        <div id="contact-form-message" class="form-result" role="status" aria-live="polite" hidden></div>
                                                </form>
                                        </div>
                                </section>

                                <!-- Footer -->
                                        <footer id="footer">
                                                <div class="footer-organization">
                                                        <p class="footer-organization__name">ICQA Inclusive Center</p>
                                                        <address class="footer-organization__address">
                                                                123 Learning Way, Jung-gu, Seoul 04524, Republic of Korea
                                                        </address>
                                                        <p class="footer-organization__contact">
                                                                <a href="tel:+82212345678">+82-2-1234-5678</a> · <a href="mailto:contact@icqa.example.com">contact@icqa.example.com</a>
                                                        </p>
                                                </div>
                                                <ul class="icons">
                                                        <li><a href="#" class="icon brands fa-twitter" aria-label="ICQA on Twitter"><span class="label">Twitter</span></a></li>
                                                        <li><a href="#" class="icon brands fa-facebook-f" aria-label="ICQA on Facebook"><span class="label">Facebook</span></a></li>
                                                        <li><a href="#" class="icon brands fa-instagram" aria-label="ICQA on Instagram"><span class="label">Instagram</span></a></li>
                                                        <li><a href="#" class="icon brands fa-dribbble" aria-label="ICQA on Dribbble"><span class="label">Dribbble</span></a></li>
                                                        <li><a href="mailto:contact@icqa.example.com" class="icon solid fa-envelope" aria-label="Email ICQA"><span class="label">Email</span></a></li>
                                                </ul>
                                                <ul class="copyright">
                                                        <li>&copy; ICQA</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
                                                </ul>
                                                <script type="application/ld+json">
                                                        {
                                                                "@context": "https://schema.org",
                                                                "@type": "Organization",
                                                                "name": "ICQA Inclusive Center",
                                                                "url": "https://icqa.us/",
                                                                "email": "contact@icqa.example.com",
                                                                "telephone": "+82-2-1234-5678",
                                                                "address": {
                                                                        "@type": "PostalAddress",
                                                                        "streetAddress": "123 Learning Way",
                                                                        "addressLocality": "Seoul",
                                                                        "postalCode": "04524",
                                                                        "addressCountry": "KR"
                                                                }
                                                        }
                                                </script>
                                        </footer>

                                       <div id="result-modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true">
                                               <div class="modal__dialog">
                                                       <button class="modal__close" aria-label="Close">×</button>
                                                       <div id="result-body">
                                                               <!-- JS 로 결과 렌더링 -->
                                                       </div>
                                               </div>
                                       </div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
                        <script src="assets/js/main.js"></script>
                        <script>
                                (function() {
                                        var body = document.body;
                                        var header = document.getElementById('header');
                                        if (!header) return;

                                        var toggleScrolledClass = function() {
                                                if (window.scrollY > 0) {
                                                        body.classList.add('is-scrolled');
                                                } else {
                                                        body.classList.remove('is-scrolled');
                                                }
                                        };

                                        toggleScrolledClass();
                                        window.addEventListener('scroll', toggleScrolledClass, { passive: true });
                                })();
                                (function() {
                                        var form = document.getElementById('contact-form');
                                        if (!form) return;

                                        var messageContainer = document.getElementById('contact-form-message');
                                        var submittingText = '메시지를 전송하는 중입니다...';
                                        var successText = '메시지가 성공적으로 전송되었습니다. 빠른 시일 내에 연락드리겠습니다.';
                                        var errorText = '메시지 전송에 실패했습니다. 잠시 후 다시 시도해 주세요.';

                                        form.addEventListener('submit', function(event) {
                                                event.preventDefault();

                                                if (messageContainer) {
                                                        messageContainer.textContent = submittingText;
                                                        messageContainer.classList.remove('success', 'error');
                                                        messageContainer.hidden = false;
                                                }

                                                var formData = new FormData(form);

                                                fetch(form.getAttribute('action'), {
                                                        method: 'POST',
                                                        headers: { 'Accept': 'application/json' },
                                                        body: formData
                                                }).then(function(response) {
                                                        if (response.ok) {
                                                                form.reset();

                                                                if (messageContainer) {
                                                                        messageContainer.textContent = successText;
                                                                        messageContainer.classList.add('success');
                                                                        messageContainer.classList.remove('error');
                                                                        messageContainer.hidden = false;
                                                                }

                                                                return;
                                                        }

                                                        return response.json().then(function(body) {
                                                                var message = body && body.error ? body.error : errorText;
                                                                throw new Error(message);
                                                        }).catch(function(error) {
                                                                throw (error instanceof Error ? error : new Error(errorText));
                                                        });
                                                }).catch(function(error) {
                                                        if (messageContainer) {
                                                                messageContainer.textContent = error && error.message ? error.message : errorText;
                                                                messageContainer.classList.add('error');
                                                                messageContainer.classList.remove('success');
                                                                messageContainer.hidden = false;
                                                        }
                                                });
                                        });
                                })();
                        </script>
                        <script>
                                // 간단 로더: data-md 속성에 지정한 경로를 fetch → Markdown → HTML 로 삽입
                                async function loadMD(el) {
                                        const path = el.getAttribute('data-md');
                                        try {
                                                const res = await fetch(path, { cache: 'no-cache' });
                                                if (!res.ok) throw new Error(res.status + ' ' + res.statusText);
                                                const text = await res.text();
                                                // Markdown(마크다운) → HTML 변환, DOMPurify로 안전화
                                                const html = DOMPurify.sanitize(marked.parse(text));
                                                el.innerHTML = html;
                                        } catch (e) {
                                                el.innerHTML = '<p style="color:#f66">콘텐츠를 불러오지 못했습니다: ' + (e.message || e) + '</p>';
                                        }
                                }
                                // 모든 data-md 요소 일괄 처리
                                document.querySelectorAll('[data-md]').forEach(loadMD);
                        </script>
                        <script>
(async function () {
  const FORM = document.getElementById('verify-form');
  if (!FORM) return;

  // 데이터 로딩
  let REGISTRY = [];
  try {
    const res = await fetch('./data/registry.json', { cache: 'no-store' });
    if (res.ok) REGISTRY = await res.json();
  } catch (_) {}

  // 모달 핸들러(이미 있으면 기존 것을 사용)
  const modal = document.getElementById('result-modal');
  const modalBody = document.getElementById('result-body');
  const btnClose = modal?.querySelector('.modal__close');
  const openModal = (html)=>{ modalBody.innerHTML = html; modal.classList.add('is-open'); modal.setAttribute('aria-hidden','false'); document.body.style.overflow='hidden'; };
  const closeModal=()=>{ modal.classList.remove('is-open'); modal.setAttribute('aria-hidden','true'); document.body.style.overflow=''; };
  btnClose?.addEventListener('click', closeModal);
  modal?.addEventListener('click', (e)=>{ if(e.target===modal) closeModal(); });
  document.addEventListener('keydown',(e)=>{ if(e.key==='Escape') closeModal(); });

  // 유틸
  const norm = (s)=> (s||'').toString().trim().toLowerCase();
  const setErr = (el,msg)=>{
    const p = document.getElementById(el.id==='field-iqn' ? 'err-iqn' : 'err-name');
    if (msg){ el.setAttribute('aria-invalid','true'); p.textContent=msg; p.hidden=false; }
    else { el.removeAttribute('aria-invalid'); p.textContent=''; p.hidden=true; }
  };

  // IQN 형식(예시): "IQN-0001" 또는 "0001" 등 허용
  const iqnOk = (v)=> /^([a-z]{2,4}-?)?\d{3,}$/i.test(v);

  FORM.addEventListener('submit', function (e) {
    e.preventDefault();

    const iqnEl = document.getElementById('field-iqn');
    const nameEl = document.getElementById('field-name');
    const iqn = norm(iqnEl.value);
    const name = norm(nameEl.value);

    // 1) 공백 방지: 둘 다 비어 있으면 거절
    if (!iqn && !name){
      setErr(iqnEl,'Enter IQN or Name.'); setErr(nameEl,'');
      iqnEl.focus(); return;
    }

    // 2) IQN 형식(입력된 경우만 검사)
    if (iqn && !iqnOk(iqn)){
      setErr(iqnEl,'Invalid IQN format. (ex: IQN-0001)'); setErr(nameEl,'');
      iqnEl.focus(); return;
    }
    setErr(iqnEl,''); setErr(nameEl,'');

    // 3) "입력칸의 값만"으로 필터 (외부 값 사용 없음)
    const results = REGISTRY.filter(row=>{
      const ri = norm(row.iqn);
      const rn = norm(row.name);
      const hitI = iqn ? ri.includes(iqn) : true;
      const hitN = name ? rn.includes(name) : true;
      return hitI && hitN;
    });

    if (!results.length){
      openModal('<p>No matching records.</p>');
      return;
    }

    const rows = results.map(r=>`
      <tr>
        <td>${r.iqn}</td>
        <td>${r.name}</td>
        <td>${r.program ?? '-'}</td>
        <td>${r.year ?? '-'}</td>
      </tr>`).join('');

    openModal(`
      <h3 style="margin:0;">Search Results</h3>
      <table class="result-table" aria-label="Qualification search results">
        <thead><tr><th>IQN</th><th>Name</th><th>Program</th><th>Year</th></tr></thead>
        <tbody>${rows}</tbody>
      </table>
    `);
  });
})();
                        </script>

        </body>
</html>
